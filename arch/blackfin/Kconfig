#
# For a description of the syntax of this configuration file,
# see Documentation/kbuild/kconfig-language.txt.
#

mainmenu "uClinux/Blackfin (w/o MMU) Kernel Configuration"

config MMU
	bool
	default n

config FPU
	bool
	default n

config RWSEM_GENERIC_SPINLOCK
	bool
	default y

config RWSEM_XCHGADD_ALGORITHM
	bool
	default n

config BFIN
	bool
	default y

config SEMAPHORE_SLEEPERS
	bool
	default y

config UCLINUX
	bool
	default y

config FORCE_MAX_ZONEORDER
	int
	default "14"

config GENERIC_CALIBRATE_DELAY
	bool
	default y

source "init/Kconfig"

menu "Blackfin Processor Options"

comment "Processor and Board Settings"

choice
	prompt	"CPU"
	default BF533

config BF531
	bool "BF531"
	help
	 BF531 Processor Support.

config BF532
	bool "BF532"
	help
	 BF532 Processor Support.

config BF533
	bool "BF533"
	help
	 BF533 Processor Support.

config BF534
	bool "BF534"
	help
	 BF534 Processor Support.

config BF535
	bool "BF535 (not supported)"
	help
	 Not Supported - BF535 Processor Support.

config BF536
	bool "BF536"
	help
	 BF536 Processor Support.

config BF537
	bool "BF537"
	help
	 BF537 Processor Support.

config BF561
	bool "BF561"
	help
	 Not Supported Yet - Work in progress - BF561 Processor Support.

endchoice

menu 	'Blackfin Kernel Optimizations'

comment 'Timer Tick'

source kernel/Kconfig.hz

comment 'Memory Optimizations'

config I_ENTRY_L1
	bool "Locate interrupt entry code in L1 Memory"
	default n
	help
	  If enabled interrupt entry code (STORE/RESTORE CONTEXT) is linked 
	  into L1 instruction memory.(less latency)

endmenu

config BLACKFIN
	bool
	depends on (BF537 || BF536 || BF534 || BF561 || BF535 || BF533 || BF532 || BF531)
	default y

config BFIN_SINGLE_CORE
	bool
	depends on (BF537 || BF536 || BF534 || BF535 || BF533 || BF532 || BF531)
	default y

config BFIN_DUAL_CORE
	bool
	depends on (BF561)
	default y

choice
	prompt	"Kernel is configured for"
	default BFIN533_STAMP
	help
	  Do NOT change the board here, please use the top level configuration to ensure all
	  all the other settings are correct

config BFIN533_EZKIT
	bool "BF533-EZKIT"
	depends on (BF533 || BF532 || BF531)
	help
	 BF533-EZKIT-LITE board Support.

config  BFIN533_STAMP
	bool "BF533-STAMP"
	depends on (BF533 || BF532 || BF531)
	help
	 BF533-STAMP board Support.

config BFIN537_STAMP
	bool "BF537-STAMP"
	depends on (BF537)
	help
	  BF537-STAMP board Support.

config BFIN533_BLUETECHNIX_CM
	bool "Bluetechnix CM-BF533 board support"
	depends on (BF533)
	help
	  CM-BF533 support for EVAL- and DEV-Board

config BFIN537_BLUETECHNIX_CM
	bool "Bluetechnix CM-BF537 board support"
	depends on (BF537)
	help
	  CM-BF537 support for EVAL- and DEV-Board

config BFIN561_EZKIT
	bool "BF561-EZKIT"
	depends on (BF561)
	help
	 BF561-EZKIT-LITE board Support.

config GENERIC_BOARD
	bool "Custom"
	depends on (BF537 || BF536 || BF534 || BF561 || BF535 || BF533 || BF532 || BF531)
	help
	 GENERIC or Custom board Support.

endchoice

config MEM_GENERIC_BOARD
	bool
	depends on GENERIC_BOARD
	default y

config MEM_MT48LC64M4A2FB_7E
	bool
	depends on (BFIN533_STAMP)
	default y

config MEM_MT48LC16M16A2TG_75
	bool
	depends on (BFIN533_EZKIT || BFIN561_EZKIT || BFIN533_BLUETECHNIX_CM || BFIN537_BLUETECHNIX_CM)
	default y

config MEM_MT48LC32M8A2_75
	bool
	depends on (BFIN537_STAMP)
	default y

config BFIN_SHARED_FLASH_ENET
	bool
	depends on (BFIN533_STAMP)
	default y


source "arch/blackfin/mach-bf533/Kconfig"
source "arch/blackfin/mach-bf561/Kconfig"
source "arch/blackfin/mach-bf537/Kconfig"

menu 	'Board specific issues'

comment 'Board Setup'

config CLKIN_HZ
	int "Crystal Frequency in Hz"
	default "11059200" if BFIN533_STAMP
	default "27000000" if BFIN533_EZKIT
	default "25000000" if BFIN537_STAMP
	default "25000000" if BFIN533_BLUETECHNIX_CM
	default "25000000" if BFIN537_BLUETECHNIX_CM
	default "30000000" if BFIN561_EZKIT
	help
	  The frequency of CLKIN crystal oscillator on the board in Hz.

config MEM_SIZE
	int "SDRAM Memory Size in MBytes"
	default  32 if BFIN533_EZKIT
	default  32 if BFIN533_BLUETECHNIX_CM
	default  32 if BFIN537_BLUETECHNIX_CM
	default  64 if BFIN537_STAMP
	default  64 if BFIN561_EZKIT
	default 128 if BFIN533_STAMP

config MEM_ADD_WIDTH
	int "SDRAM Memory Address Width"
	default  9 if BFIN533_EZKIT
	default  9 if BFIN561_EZKIT
	default  9 if BFIN533_BLUETECHNIX_CM
	default  9 if BFIN537_BLUETECHNIX_CM
	default 10 if BFIN537_STAMP
	default 11 if BFIN533_STAMP

config ENET_FLASH_PIN
	int "PF port/pin used for flash and ethernet sharing"
	depends on (BFIN533_STAMP)
	default  1
	help
	  PF port/pin used for flash and ethernet sharing to allow other PF
	  pins to be used on other platforms without having to touch common code.
	  For example: PF0 --> 1,PF1 --> 2,PF2 --> 4, etc.

config BOOT_LOAD
	hex "Kernel load address for booting"
	default "0x1000"
	help
	  This option allows you to set the load address of the kernel.  This can
	  be useful if you are on a board which has a small amount of memory or
	  you wish to reserve some memory at the beginning of the address space.

	  Note that you generally want to keep this value at or above 4k (0x1000)
	  as this will allow the kernel to capture NULL pointer references.

comment	'LED Status Indicators'

config BFIN_ALIVE_LED
	bool "Enable Board Alive"
	depends on ( BFIN533_STAMP || BFIN533_BLUETECHNIX_CM )
	default n
	help
	  Blinks the LED you select when the kernel is running. Helps detect a hung kernel.

config BFIN_ALIVE_LED_NUM
	int "LED"
	depends on BFIN_ALIVE_LED
	range 1 3 if BFIN533_STAMP
	range 1 2 if BFIN533_BLUETECHNIX_CM
	default "3" if BFIN533_STAMP
	default "1" if BFIN533_BLUETECHNIX_CM
	help
	  Select the LED (marked on the board) for you to blink.

config BFIN_IDLE_LED
	bool 'Enable System Load/Idle LED'
	depends on ( BFIN533_STAMP || BFIN533_BLUETECHNIX_CM )
	default n
	help
	  Blinks the LED you select when to determine kernel load.

config BFIN_IDLE_LED_NUM
	int "LED"
	depends on BFIN_IDLE_LED
	range 1 3 if BFIN533_STAMP
	range 1 2 if BFIN533_BLUETECHNIX_CM
	default "2" if BFIN533_STAMP
	default "2" if BFIN533_BLUETECHNIX_CM
	help
	  Select the LED (marked on the board) for you to blink.

#
# Sorry - but you need to put the hex address here -
#

# Flag Data register
config BFIN_ALIVE_LED_PORT
	hex
	default 0xFFC00700 if (BFIN533_STAMP)
	default 0xFFC00700 if (BFIN533_BLUETECHNIX_CM)

# Peripheral Flag Direction Register
config BFIN_ALIVE_LED_DPORT
        hex
        default 0xFFC00730 if (BFIN533_STAMP)
	default 0xFFC00730 if (BFIN533_BLUETECHNIX_CM)

config BFIN_ALIVE_LED_PIN
	hex
	default 0x04 if (BFIN533_STAMP && ( BFIN_ALIVE_LED_NUM = 1 ))
	default 0x08 if (BFIN533_STAMP && ( BFIN_ALIVE_LED_NUM = 2 ))
	default 0x10 if (BFIN533_STAMP && ( BFIN_ALIVE_LED_NUM = 3 ))
	default 0x80 if (BFIN533_BLUETECHNIX_CM && ( BFIN_ALIVE_LED_NUM = 1 ))
	default 0x40 if (BFIN533_BLUETECHNIX_CM && ( BFIN_IDLE_LED_NUM = 2 ))

config BFIN_IDLE_LED_PORT
        hex
        default 0xFFC00700 if (BFIN533_STAMP)
	default 0xFFC00700 if (BFIN533_BLUETECHNIX_CM)

# Peripheral Flag Direction Register
config BFIN_IDLE_LED_DPORT
        hex
        default 0xFFC00730 if (BFIN533_STAMP)
	default 0xFFC00730 if (BFIN533_BLUETECHNIX_CM)

config BFIN_IDLE_LED_PIN
        hex
        default 0x04 if (BFIN533_STAMP && ( BFIN_IDLE_LED_NUM = 1 ))
        default 0x08 if (BFIN533_STAMP && ( BFIN_IDLE_LED_NUM = 2 ))
        default 0x10 if (BFIN533_STAMP && ( BFIN_IDLE_LED_NUM = 3 ))
        default 0x80 if (BFIN533_BLUETECHNIX_CM && ( BFIN_IDLE_LED_NUM = 1 ))
        default 0x40 if (BFIN533_BLUETECHNIX_CM && ( BFIN_IDLE_LED_NUM = 2 ))

comment 'Console UART Setup'

choice
        prompt "Baud Rate"
        default BAUD_57600
config BAUD_9600
        bool "9600"
config BAUD_19200
        bool "19200"
config BAUD_38400
        bool "38400"
config BAUD_57600
        bool "57600"
config BAUD_115200
        bool "115200"
endchoice

choice
	prompt "Parity"
	default BAUD_NO_PARITY
config  BAUD_NO_PARITY
	bool "No Parity"
config  BAUD_PARITY
	bool "Parity"
endchoice

choice
	prompt "Stop Bits"
	default BAUD_1_STOPBIT
config  BAUD_1_STOPBIT
	bool "1"
config  BAUD_2_STOPBIT
        bool "2"
endchoice

endmenu


choice
	prompt	"Kernel executes from"
	---help---
	  Choose the memory type that the kernel will be running in.

config	RAMKERNEL
	bool "RAM"
	help
	  The kernel will be resident in RAM when running.

config	ROMKERNEL
	bool "ROM"
	help
	  The kernel will be resident in FLASH/ROM when running.

endchoice

source "mm/Kconfig"


config LARGE_ALLOCS
	bool "Allow allocating large blocks (> 1MB) of memory"
	help
	  Allow the slab memory allocator to keep chains for very large
	  memory sizes - upto 32MB. You may need this if your system has
	  a lot of RAM, and you need to able to allocate very large
	  contiguous chunks. If unsure, say N.

config IRQCHIP_DEMUX_GPIO
	bool "Enable GPIO IRQ Demultiplexing"
	depends on BLACKFIN
	default n
	help
	  Demultiplex GPIO interrupt, enabling IRQ_PF0 through IRQ_PF15

comment 'DMA Support'
choice
	prompt	"Select DMA driver"
	---help---
	  Choose DMA driver implemntation

config NO_DMA
	bool 'Disable DMA Support'
	help
	  Disable DMA driver

config BFIN_DMA_5XX
	bool 'Enable DMA Support'
	depends on (BF533 || BF532 || BF531 || BF537 || BF536 || BF534 || BF561)
	help
	  DMA driver for BF5xx
endchoice

comment 'Cache Support'
config	BLKFIN_CACHE
	bool "Enable ICACHE"
config	BLKFIN_DCACHE
	bool "Enable DCACHE"
config 	BLKFIN_CACHE_LOCK
	bool "Enable Cache Locking"

choice
	prompt "Policy"
	depends on BLKFIN_DCACHE
	default BLKFIN_WB
config 	BLKFIN_WB
	bool "Write back"
config	BLKFIN_WT
	bool "Write through"
endchoice

choice
	prompt "Uncached SDRAM region"
	default UNCACHED_1M
config UNCACHED_2M
	bool 'Enable 2M DMA Zone'
config UNCACHED_1M
	bool 'Enable 1M DMA Zone'
config UNCACHED_512K
	bool 'Enable 512K DMA Zone'
config UNCACHED_256K
	bool 'Enable 256k DMA Zone'
config UNCACHED_NONE
	bool 'Disable DMA Zone'
	---help---
	  Size of the uncached SDRAM region used for DMA memory.
endchoice

menu	"Clock Settings"


config BFIN_KERNEL_CLOCK
	bool "Re-program Clocks while Kernel boots?"
	default n
	help
	  This option decides if kernel clocks are re-programed from the bootloader
	  settings. If the clocks are not set, the SDRAM settings are also not
	  changed, and the Bootloader does 100% of the hardware configuration.

config VCO_MULT
	int "VCO Multiplier"
	depends on BFIN_KERNEL_CLOCK
	default "22" if BFIN533_EZKIT
	default "45" if BFIN533_STAMP
	default "20" if BFIN537_STAMP
	default "22" if BFIN533_BLUETECHNIX_CM
	default "20" if BFIN537_BLUETECHNIX_CM
	default "20" if BFIN561_EZKIT

config CCLK_DIV
	int "Core Clock Divider"
	depends on BFIN_KERNEL_CLOCK
	default 1 if BFIN533_EZKIT
	default 1 if BFIN533_STAMP
	default 1 if BFIN537_STAMP
	default 1 if BFIN533_BLUETECHNIX_CM
	default 1 if BFIN537_BLUETECHNIX_CM
	default 1 if BFIN561_EZKIT

config SCLK_DIV
	int "System Clock Divider"
	depends on BFIN_KERNEL_CLOCK
	default 5 if BFIN533_EZKIT
	default 5 if BFIN533_STAMP
	default 4 if BFIN537_STAMP
	default 5 if BFIN533_BLUETECHNIX_CM
	default 4 if BFIN537_BLUETECHNIX_CM
	default 5 if BFIN561_EZKIT

config CLKIN_HALF
	bool "Half ClockIn"
	depends on BFIN_KERNEL_CLOCK
	default n

config PLL_BYPASS
	bool "Bypass PLL"
	depends on BFIN_KERNEL_CLOCK
	default n

endmenu

comment'Asynchonous Memory Configuration'

menu'EBIU_AMBCTL Global Control'
config C_AMCKEN
	bool "Enable CLKOUT"
	default y

config C_CDPRIO
	bool "DMA has priority over core for ext. accesses"
	default n

config C_B0PEN
	depends on BF561
	bool "Bank 0 16 bit packing enable"
	default y

config C_B1PEN
	depends on BF561
	bool "Bank 1 16 bit packing enable"
	default y

config C_B2PEN
	depends on BF561
	bool "Bank 3 16 bit packing enable"
	default y

config C_B3PEN
	depends on BF561
	bool "Bank 3 16 bit packing enable"
	default n

choice
	prompt"Enable Asynchonous Memory Banks"
	default C_AMBEN_ALL

config C_AMBEN
	bool "Disable All Banks"

config C_AMBEN_B0
	bool "Enable Bank 0"

config C_AMBEN_B0_B1
	bool "Enable Bank 0 & 1"

config C_AMBEN_B0_B1_B2
	bool "Enable Bank 0 & 1 & 2"

config C_AMBEN_ALL
	bool "Enable All Banks"
endchoice
endmenu

menu'EBIU_AMBCTL Control'
config BANK_0
	hex "Bank 0"
	default 0x7BB0

config BANK_1
	hex "Bank 1"
	default 0x7BB0

config BANK_2
	hex "Bank 2"
	default 0x7BB0

config BANK_3
	hex "Bank 3"
	default 0x99B3
endmenu

config BFIN_SPORT
	bool "Enable sport"
	depends on BLACKFIN
	default n

endmenu

#############################################################################
menu "Bus options (PCI, PCMCIA, EISA, MCA, ISA)"

config PCI
	bool "PCI support"
	help
	  Support for PCI bus.

source "drivers/pci/Kconfig"

config HOTPLUG
	bool "Support for hot-pluggable device"
	  ---help---
	  Say Y here if you want to plug devices into your computer while
	  the system is running, and be able to use them quickly.  In many
	  cases, the devices can likewise be unplugged at any time too.

	  One well known example of this is PCMCIA- or PC-cards, credit-card
	  size devices such as network cards, modems or hard drives which are
	  plugged into slots found on all modern laptop computers.  Another
	  example, used on modern desktops as well as laptops, is USB.

	  Enable HOTPLUG and KMOD, and build a modular kernel.  Get agent
	  software (at <http://linux-hotplug.sourceforge.net/>) and install it.
	  Then your kernel will automatically call out to a user mode "policy
	  agent" (/sbin/hotplug) to load modules and set up software needed
	  to use devices as you hotplug them.

source "drivers/pcmcia/Kconfig"

source "drivers/pci/hotplug/Kconfig"

endmenu

menu "Executable file formats"

source "fs/Kconfig.binfmt"

endmenu

menu "Power management options"
config PM
	bool "Power Management support for BF533/BF537"
	help
	  Support processor power management modes
endmenu

if (BF537 || BF533)

menu "CPU Frequency scaling"

source "drivers/cpufreq/Kconfig"

config CPU_FREQ
	bool
	default n
	help
	If you want to enable this option, you should select DPMC driver from Character Devices
endmenu

endif

source "net/Kconfig"

source "drivers/Kconfig"

source "fs/Kconfig"

source "arch/blackfin/oprofile/Kconfig"

menu "Kernel hacking"

source "lib/Kconfig.debug"

config DEBUG_SERIAL_EARLY_INIT
	bool 'Initialize serial driver early'
	default n
	depends on SERIAL_BLACKFIN
	help
	  Say Y here if you want to get kernel output early when kernel
	  crashes before the normal console initialization. If this option
	  is enable, console output will always go to the ttyS0, no matter
	  what kernel boot paramters you set.

config DEBUG_HWERR
	bool "Hardware error interrupt debugging"
	help
	  When enabled, the hardware error interrupt is never disabled, and
	  will happen immediately when an error condition occurs.  This comes
	  at a slight cost in code size, but is necessary if you are getting
	  hardware error interrupts and need to know where they are coming
	  from.

config DUAL_CORE_TEST_MODULE
	tristate "Dual Core Test Module"
	depends on (BF561)
	default n
	help
	  Say Y here to build-in dual core test module for dual core test.

config DEBUG_ICACHE_CHECK
	bool "Check Instruction cache coherancy"
	depends on DEBUG_KERNEL
	depends on DEBUG_HWERR
	help
	  Say Y here if you are getting wierd unexplained errors. This will
	  ensure that icache is what SDRAM says it should be, by doing a
	  byte wise comparision between SDRAM and instruction cache. This
	  also relocates the irq_panic() function to L1 memory, (which is
	  un-cached).

config DEBUG_KERNEL_START
	bool "Debug Kernel Startup"
	depends on DEBUG_KERNEL
	help
	  Say Y here to put in an mini-execption handler before the kernel
	  replaces the bootloader exception handler. This will stop kernels
	  from dieing at startup with no visible error messages

config DEBUG_HUNT_FOR_ZERO
	bool "Catch NULL pointer reads/writes"
	default y
	help
	  Say Y here to catch reads/writes to anywhere in the memory range
	  from 0x0000 - 0x0FFF (the first 4k) of memory.  This is useful in
	  catching common programming errors such as NULL pointer dereferences.

	  Misbehaving applications will be killed (generate a SEGV) while the
	  kernel will trigger a panic.

	  Enabling this option will take up an extra entry in CPLB table.
	  Otherwise, there is no extra overhead.

config BOOTPARAM
	bool 'Compiled-in Kernel Boot Parameter'

config BOOTPARAM_STRING
	string 'Kernel Boot Parameter'
	default 'console=ttyS0,19200'
	depends on BOOTPARAM

config NO_KERNEL_MSG
	bool "Suppress Kernel BUG Messages"
	help
	  Do not output any debug BUG messages within the kernel.

config CPLB_INFO
	bool "Display the CPLB information"
	help
	  Display the CPLB information.

config NO_ACCESS_CHECK
	bool "Don't check the user pointer address"
	help
	  Usually the pointer transfer from user space is checked to see if its
	  address is in the kernel space. This option disable that check to
	  improve the performance.
  
endmenu

source "security/Kconfig"

source "crypto/Kconfig"

source "lib/Kconfig"




